
CREATE TABLE `TipoPaciente` (
                `IdTipoPaciente` TINYINT(4) AUTO_INCREMENT NOT NULL,
                `Descricao` VARCHAR(50) NOT NULL,
                PRIMARY KEY (IdTipoPaciente)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;




CREATE TABLE `Paciente` (
                `IdPaciente` INT(11) AUTO_INCREMENT NOT NULL,
                `Nome` VARCHAR(100) NOT NULL,
                `IdUnidadeInternacao` TINYINT(4) NOT NULL,
                `IdTipoPaciente` TINYINT(4) NOT NULL,
                PRIMARY KEY (IdPaciente)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;



CREATE TABLE `Questionario` (
                `IdQuestionario` INT(11) AUTO_INCREMENT NOT NULL,
                `IdFormulario` INT(11) NOT NULL,
                `IdPaciente` INT(11) NOT NULL,
                `DataRealizado` DATE NOT NULL,
                `IdFuncionario` INT(11) NOT NULL,
                PRIMARY KEY (IdQuestionario)
);




CREATE TABLE `Resposta` (
                `IdResposta` INT(11) AUTO_INCREMENT NOT NULL,
                `IdQuestionario` INT(11) NOT NULL,
                `IdQuestao` INT(11) NOT NULL,
                `IdAplicacao` INT(11) NOT NULL,
                `IdAvaliacao` INT(11) NOT NULL,
                PRIMARY KEY (IdResposta)
);


CREATE TABLE `RespostaMultipla` (
                `IdResposta` INT(11) NOT NULL,
                PRIMARY KEY (IdResposta)
);


CREATE TABLE `RespostaUnica` (
                `IdResposta` INT(11) NOT NULL,
                `IdAfirmativa` INT(11) NOT NULL,
                PRIMARY KEY (IdResposta)
);


CREATE TABLE `RespostaAberta` (
                `IdRespostaAberta` INT(11) AUTO_INCREMENT NOT NULL,
                `DescricaoRespostaAberta` VARCHAR NOT NULL,
                `IdResposta` INT(11) NOT NULL,
                PRIMARY KEY (IdRespostaAberta)
);



CREATE TABLE `RespostaMultiplaAfirmativa` (
                `IdResposta` INT(11) NOT NULL,
                `IdAfirmativa` INT(11) NOT NULL,
                `IdQuestao` INT(11) NOT NULL,
                PRIMARY KEY (IdResposta, IdAfirmativa, IdQuestao)
);


ALTER TABLE `Paciente` ADD CONSTRAINT `tipopaciente_paciente_fk`
FOREIGN KEY (`IdTipoPaciente`)
REFERENCES `TipoPaciente` (IdTipoPaciente)
ON DELETE NO ACTION
ON UPDATE NO ACTION;


ALTER TABLE `Questionario` ADD CONSTRAINT `funcionario_questionario_fk`
FOREIGN KEY (`IdFuncionario`)
REFERENCES `Funcionario` (`IdFuncionario`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;


ALTER TABLE `Paciente` ADD CONSTRAINT `unidadeinternacao_paciente_fk`
FOREIGN KEY (`IdUnidadeInternacao`)
REFERENCES `UnidadeInternacao` (`IdUnidadeInternacao`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;

ALTER TABLE `Questionario` ADD CONSTRAINT `paciente_questionario_fk`
FOREIGN KEY (`IdPaciente`)
REFERENCES `Paciente` (`IdPaciente`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;


ALTER TABLE `Resultado` ADD CONSTRAINT `diagnostico_resultado_fk`
FOREIGN KEY (`IdDiagnostico`)
REFERENCES `Diagnostico` (`IdDiagnostico`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;


ALTER TABLE `Questionario` ADD CONSTRAINT `formulario_questionario_fk`
FOREIGN KEY (`IdFormulario`)
REFERENCES `Formulario` (`IdFormulario`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;

ALTER TABLE `Resposta` ADD CONSTRAINT `questionario_resposta_fk`
FOREIGN KEY (`IdQuestionario`)
REFERENCES `Questionario` (`IdQuestionario`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;



ALTER TABLE `Resposta` ADD CONSTRAINT `aplicacao_resposta_fk`
FOREIGN KEY (`IdAplicacao`)
REFERENCES `Aplicacao` (`IdAplicacao`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;

ALTER TABLE `QuestaoAfirmativa` ADD CONSTRAINT `afirmativa_questaomultiplaescolhaafirmativa_fk`
FOREIGN KEY (`IdAfirmativa`)
REFERENCES `Afirmativa` (`IdAfirmativa`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;

ALTER TABLE `RespostaUnica` ADD CONSTRAINT `afirmativa_respostaunica_fk`
FOREIGN KEY (`IdAfirmativa`)
REFERENCES `Afirmativa` (`IdAfirmativa`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;


ALTER TABLE `Resposta` ADD CONSTRAINT `questao_resposta_fk`
FOREIGN KEY (`IdQuestao`)
REFERENCES `Questao` (`IdQuestao`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;

ALTER TABLE `Resposta` ADD CONSTRAINT `avaliacaoquestao_resposta_fk`
FOREIGN KEY (`IdAvaliacao`, `IdQuestao`)
REFERENCES `AvaliacaoQuestao` (`IdAvaliacao`, `IdQuestao`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;

ALTER TABLE `RespostaAberta` ADD CONSTRAINT `resposta_respostaaberta_fk`
FOREIGN KEY (`IdResposta`)
REFERENCES `Resposta` (`IdResposta`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;

ALTER TABLE `RespostaUnica` ADD CONSTRAINT `resposta_respostaunica_fk`
FOREIGN KEY (`IdResposta`)
REFERENCES `Resposta` (`IdResposta`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;

ALTER TABLE `RespostaMultipla` ADD CONSTRAINT `resposta_respostamultipla_fk`
FOREIGN KEY (`IdResposta`)
REFERENCES `Resposta` (`IdResposta`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;

ALTER TABLE `RespostaMultiplaAfirmativa` ADD CONSTRAINT `respostamultipla_respostamultiplaafirmativa_fk`
FOREIGN KEY (`IdResposta`)
REFERENCES `RespostaMultipla` (`IdResposta`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;

ALTER TABLE `RespostaMultiplaAfirmativa` ADD CONSTRAINT `questaoafirmativa_respostamultiplaafirmativa_fk`
FOREIGN KEY (`IdQuestao`, `IdAfirmativa`)
REFERENCES `QuestaoAfirmativa` (`IdQuestao`, `IdAfirmativa`)
ON DELETE NO ACTION
ON UPDATE NO ACTION;